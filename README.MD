## [v1.0] 为了更好的开发,不得不规定一下战斗模型
1. looter的属性有【基本属性】和【战斗属性】
2. 基本属性即HP,力量,敏捷等
3. 同时每种属性还有【持续】和【临时】两种类型，其中【临时】类型的属性在回合结束时清空
4. 战斗属性即攻击力、防御力、速度、暴击率、闪避率、附加伤害、伤害减免
5. 技能分为【主动技能】和【被动技能】
6. 被动技能分为【普通被动技能】和【触发被动技能】
7. 【普通被动技能】即直接添加面板的技能，它可以永久增加角色的基本属性或者战斗属性
8. 【触发被动技能】可以在某些特定场合发动，它会造成一些影响(比如反击,减抗等)
9. 战斗时:
   1. 调用双方的【回合开始】方法
   2. 调用角色的攻击方法
   3. 角色选择技能,并选择目标
   4. 调用【被动技能生效】方法，检查自己的所有【触发被动技能】是否满足生效条件(条件可以根据上下文来决定,上下文包括攻击者和被攻击者)，如果满足则发动(增加自己的伤害,减少对方防御)
   5. 选择的技能生效(主动技能生成一个Effect),调用对方的【受到攻击接口】
   6. 对方调用【被动技能生效】方法，检查自己的所有【触发被动技能】是否满足生效条件(条件可以根据上下文来决定,上下文包括攻击者和被攻击者,伤害Effect),如果满足则发动(增加自己防御,增加自己闪避)
   7. 计算并计算伤害(根据自己的【战斗属性】对伤害值进行增减)，并输出真正Effect
   8. 对方调用【被动技能生效】方法，检查自己的所有【触发被动技能】是否满足生效条件(条件可以根据上下文来决定,上下文包括攻击者和被攻击者,真正受到的Effect),如果满足则发动(回复自己血量)
   9. 回调攻击方的【攻击结束】方法
   10. 攻击方调用【被动技能生效】方法，检查自己的所有【触发被动技能】是否满足生效条件(条件可以根据上下文来决定,上下文包括攻击者和被攻击者,真正受到的Effect),如果满足则发动(吸血什么的)
   11. 调用双方的【回合结束】方法

---

## 链接

[英雄战力表](src/main/java/com/nikfce/role/hero/README.MD)


---
## 更新日志

### [v1.1]强化型技能

- 增加强化型技能,这种技能只能对自己释放,为自己增加属性,且释放后就不调用敌方的beAttack()


### [v1.2]闪避系统

- 在受到攻击时计算自己的闪避率,如果闪避成功,则不受到任何影响,攻击者会直接结束这一次攻击


### [v1.3]暴击系统

- 攻击时会计算暴击率,如果触发暴击则本次伤害加倍
- Stage增加擂台赛和1V1,这个版本李坤具有压倒性的优势


### [v1.4]技能的初始化

- 技能接口增加了战斗前、战斗后、回合开始前、回合开始后的钩子,便于初始化和收尾
- 介绍了各英雄和英雄强度

### [v1.4.1]属性被动技能

- 增加新应用`勇哥`
- 增加新的属性被动技能: `身体棒棒`,`完美大腿`,`肌肉拉满`,可以在战斗开始时给looter直接增加属性
- 优化积分赛和1V1比赛的对战类,且战斗前会展示双方状态

### [v1.4.2]添加Recorder接口

- 添加ThreadLocalMap,用于存放当前线程使用的上下文
- 添加Recorder接口和几个实现
- BufferRecorder,把日志记录到buffer中,调用flush()可以一次拿到所有存下的记录,方便在http请求中直接返回
- ConsoleRecorder,单例,多用于本地调试

### [v1.5]开发计划:

- 添加用户访问页面游玩功能
- 因为战斗是在结界里进行的，所以每次战斗会刷新角色血量
- 战斗完成后,可以选择获得对方技能
- 第一版先简单点
- 场景只有一个【办公室】和一个【幻极仙踪】
- 【办公室】里边有低级小怪，打败小怪也可以获得技能
- 【幻极仙踪】里可以挑战作者【成总】和他的朋友，挑战顺序有很大的讲究，因为【成总】会丧心病发，吃掉他的同伴，获得他同伴的技能
- 要实现以上功能的话，就必须要支持动态(通过配置文件)创建角色类，所以需要实现角色配置文件
- 下一步就要实现动态(通过配置文件)创建场景类

好,先为每个技能类添加一个唯一序号
然后为每个Looter的子类添加唯一序号
定义技能注册中心
定义角色类注册中心
通过配置文件实现角色类注册,实例化和对战
现在已经实现通过配置直接注册角色了
然后我需要commit以下，保存起来
ok,保存下来了
接下来,开始计划场景类scene如何实现
现在需要搞定yml文件的解析！！!
ok,现在已经搞定yml文件的解析了
ok,现在已经可以用配置文件动态加载场景了,且场景内的各个组件都实现了Checkable接口,实现这个接口,在加载完成后会调用它并检查合法性
凌晨四点,终于把场景的自定义弄好了
自己搞了个超级简单的小demo,在SceneGame里,这里因为太困了没有完善,后续要加上scene战斗结束后把isPass设置为true,且要奖励Looter
ok,修改了以下Flow类和Scene类,战斗是Flow类的executeBattle触发的,以后还能执行它的其他方法,比如[奇遇]或者[许愿]什么的,以后再说,现在只有战斗
新增Flow类的奖励机制,目前的奖励是入侵者可以获得敌人的技能,以后可以通过配置文件,用关键字来定义奖励
新增Scene的passAll()方法,判断这个Scene是否全部结束
现在的SceneGame已经是一个有点意思的游戏了!!